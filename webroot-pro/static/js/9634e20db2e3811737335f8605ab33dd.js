function roll(){lottery.times+=1;lottery.roll();if(lottery.times>lottery.cycle+10&&lottery.prize==lottery.index){clearTimeout(lottery.timer);lottery.openPrizeBox();lottery.prize=-1;lottery.times=0;click=!1}else{if(lottery.times<lottery.cycle)lottery.speed-=10;else if(lottery.times==lottery.cycle){var t=Math.random()*lottery.count|0;lottery.prize=t}else lottery.times>lottery.cycle+10&&(0==lottery.prize&&7==lottery.index||lottery.prize==lottery.index+1)?lottery.speed+=110:lottery.speed+=20;lottery.speed<40&&(lottery.speed=40);lottery.timer=setTimeout(roll,lottery.speed)}}var lottery={index:-1,speed:20,times:0,timer:0,cycle:50,prize:-1,count:0,init:function(t){if($("#"+t).find(".lottery_unit").length>0){$lottery=$("#"+t);$units=$lottery.find(".lottery_unit");this.obj=$lottery;this.count=$units.length;$lottery.find(".lottery_unit"+this.index).addClass("lottery_unit_active")}},roll:function(){var t=this.index,e=this.count,l=this.obj;$(l).find(".lottery_unit"+t).removeClass("lottery_unit_active");t+=1;t>e-1&&(t=0);$(l).find(".lottery_unit"+t).addClass("lottery_unit_active");this.index=t},openPrizeBox:function(){$(".turntable_box .prize"+lottery.prize).removeClass("hid")}},click=!1;window.onload=function(){lottery.init("lottery");$("#activitybeiginbutton").click(function(){if(click)return!1;lottery.speed=100;roll();click=!0});$(".turntable_reslut_close").click(function(){$(this).parent(".turntable_reslut").addClass("hid")})};